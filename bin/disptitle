#!/bin/bash

clipboarder(){
  echo "%{A3:echo '$1' | xclip -selection clipboard:}$1%{A}"
}


mode=$( ~/bin/i3var get pbtitlemode )
if [[ $1 = switch ]]; then
	#statments
	if [[ $mode = advanced ]]; then
		~/bin/i3var set pbtitlemode normal
		mode=normal
	else

		~/bin/i3var set pbtitlemode advanced
		mode=advanced

	fi

fi

if [[ $mode = advanced ]]; then
	awc=$(~/bin/i3get -r c)
	awi=$(~/bin/i3get -r i)
	output="$(clipboarder "$awc")   ---   $(clipboarder "$awi")"
else
	awt=$( ~/bin/i3get -r t )
	output="$(clipboarder "$awt")"
fi


echo "%{A1:polybar-msg hook titlehook 3:}${output//\"/}%{A}"
